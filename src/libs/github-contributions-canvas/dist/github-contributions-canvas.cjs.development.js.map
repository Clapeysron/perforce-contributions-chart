{"version":3,"file":"github-contributions-canvas.cjs.development.js","sources":["../src/themes.ts","../src/index.ts"],"sourcesContent":["export const themes = {\r\n  __test__: {\r\n    background: \"#ffffff\",\r\n    text: \"#ffffff\",\r\n    meta: \"#ffffff\",\r\n    grade4: \"#196127\",\r\n    grade3: \"#239a3b\",\r\n    grade2: \"#7bc96f\",\r\n    grade1: \"#c6e48b\",\r\n    grade0: \"#ebedf0\"\r\n  },\r\n  standard: {\r\n    background: \"#ffffff\",\r\n    text: \"#000000\",\r\n    meta: \"#666666\",\r\n    grade4: \"#216e39\",\r\n    grade3: \"#30a14e\",\r\n    grade2: \"#40c463\",\r\n    grade1: \"#9be9a8\",\r\n    grade0: \"#ebedf0\"\r\n  },\r\n  classic: {\r\n    background: \"#ffffff\",\r\n    text: \"#000000\",\r\n    meta: \"#666666\",\r\n    grade4: \"#196127\",\r\n    grade3: \"#239a3b\",\r\n    grade2: \"#7bc96f\",\r\n    grade1: \"#c6e48b\",\r\n    grade0: \"#ebedf0\"\r\n  },\r\n  githubDark: {\r\n    background: \"#101217\",\r\n    text: \"#ffffff\",\r\n    meta: \"#dddddd\",\r\n    grade4: \"#27d545\",\r\n    grade3: \"#10983d\",\r\n    grade2: \"#00602d\",\r\n    grade1: \"#003820\",\r\n    grade0: \"#161b22\"\r\n  },\r\n  halloween: {\r\n    background: \"#ffffff\",\r\n    text: \"#000000\",\r\n    meta: \"#666666\",\r\n    grade4: \"#03001C\",\r\n    grade3: \"#FE9600\",\r\n    grade2: \"#FFC501\",\r\n    grade1: \"#FFEE4A\",\r\n    grade0: \"#ebedf0\"\r\n  },\r\n  teal: {\r\n    background: \"#ffffff\",\r\n    text: \"#000000\",\r\n    meta: \"#666666\",\r\n    grade4: \"#458B74\",\r\n    grade3: \"#66CDAA\",\r\n    grade2: \"#76EEC6\",\r\n    grade1: \"#7FFFD4\",\r\n    grade0: \"#ebedf0\"\r\n  },\r\n  leftPad: {\r\n    background: \"#000000\",\r\n    text: \"#ffffff\",\r\n    meta: \"#999999\",\r\n    grade4: \"#F6F6F6\",\r\n    grade3: \"#DDDDDD\",\r\n    grade2: \"#A5A5A5\",\r\n    grade1: \"#646464\",\r\n    grade0: \"#2F2F2F\"\r\n  },\r\n  dracula: {\r\n    background: \"#181818\",\r\n    text: \"#f8f8f2\",\r\n    meta: \"#666666\",\r\n    grade4: \"#ff79c6\",\r\n    grade3: \"#bd93f9\",\r\n    grade2: \"#6272a4\",\r\n    grade1: \"#44475a\",\r\n    grade0: \"#282a36\"\r\n  },\r\n  blue: {\r\n    background: \"#181818\",\r\n    text: \"#C0C0C0\",\r\n    meta: \"#666666\",\r\n    grade4: \"#4F83BF\",\r\n    grade3: \"#416895\",\r\n    grade2: \"#344E6C\",\r\n    grade1: \"#263342\",\r\n    grade0: \"#222222\"\r\n  },\r\n  panda: {\r\n    background: \"#2B2C2F\",\r\n    text: \"#E6E6E6\",\r\n    meta: \"#676B79\",\r\n    grade4: \"#FF4B82\",\r\n    grade3: \"#19f9d8\",\r\n    grade2: \"#6FC1FF\",\r\n    grade1: \"#34353B\",\r\n    grade0: \"#242526\"\r\n  },\r\n  sunny: {\r\n    background: \"#ffffff\",\r\n    text: \"#000000\",\r\n    meta: \"#666666\",\r\n    grade4: \"#a98600\",\r\n    grade3: \"#dab600\",\r\n    grade2: \"#e9d700\",\r\n    grade1: \"#f8ed62\",\r\n    grade0: \"#fff9ae\"\r\n  },\r\n  pink: {\r\n    background: \"#ffffff\",\r\n    text: \"#000000\",\r\n    meta: \"#666666\",\r\n    grade4: \"#61185f\",\r\n    grade3: \"#a74aa8\",\r\n    grade2: \"#ca5bcc\",\r\n    grade1: \"#e48bdc\",\r\n    grade0: \"#ebedf0\"\r\n  },\r\n  YlGnBu: {\r\n    // http://colorbrewer2.org/#type=sequential&scheme=YlGnBu&n=5\r\n    background: \"#ffffff\",\r\n    text: \"#000000\",\r\n    meta: \"#666666\",\r\n    grade4: \"#253494\",\r\n    grade3: \"#2c7fb8\",\r\n    grade2: \"#41b6c4\",\r\n    grade1: \"#a1dab4\",\r\n    grade0: \"#ebedf0\"\r\n  },\r\n  solarizedDark: {\r\n    background: \"#002b36\",\r\n    text: \"#93a1a1\",\r\n    meta: \"#586e75\",\r\n    grade4: \"#d33682\",\r\n    grade3: \"#b58900\",\r\n    grade2: \"#2aa198\",\r\n    grade1: \"#268bd2\",\r\n    grade0: \"#073642\"\r\n  },\r\n  solarizedLight: {\r\n    background: \"#fdf6e3\",\r\n    text: \"#586e75\",\r\n    meta: \"#93a1a1\",\r\n    grade4: \"#6c71c4\",\r\n    grade3: \"#dc322f\",\r\n    grade2: \"#cb4b16\",\r\n    grade1: \"#b58900\",\r\n    grade0: \"#eee8d5\"\r\n  }\r\n};\r\n","import addWeeks from \"date-fns/addWeeks\";\r\nimport format from \"date-fns/format\";\r\nimport getMonth from \"date-fns/getMonth\";\r\nimport isAfter from \"date-fns/isAfter\";\r\nimport isBefore from \"date-fns/isBefore\";\r\nimport parseISO from \"date-fns/parseISO\";\r\nimport addDays from \"date-fns/addDays\";\r\nimport startOfWeek from \"date-fns/startOfWeek\";\r\nimport { themes } from \"./themes\";\r\n\r\ninterface DataStructYear {\r\n  year: string;\r\n  total: number;\r\n  range: {\r\n    start: string;\r\n    end: string;\r\n  };\r\n}\r\n\r\ninterface DataStructContribution {\r\n  date: string;\r\n  count: number;\r\n  color: string;\r\n  intensity: number;\r\n}\r\n\r\ninterface DataStruct {\r\n  years: DataStructYear[];\r\n  contributions: DataStructContribution[];\r\n}\r\n\r\ninterface GraphEntry {\r\n  date: string;\r\n  info?: DataStructContribution;\r\n}\r\n\r\ninterface Options {\r\n  themeName?: keyof typeof themes;\r\n  customTheme?: Theme;\r\n  skipHeader?: boolean;\r\n  skipAxisLabel?: boolean;\r\n  username: string;\r\n  data: DataStruct;\r\n  fontFace?: string;\r\n  footerText?: string;\r\n}\r\n\r\ninterface DrawYearOptions extends Options {\r\n  year: DataStructYear;\r\n  offsetX?: number;\r\n  offsetY?: number;\r\n}\r\n\r\ninterface DrawMetadataOptions extends Options {\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\ninterface Theme {\r\n  background: string;\r\n  text: string;\r\n  meta: string;\r\n  grade4: string;\r\n  grade3: string;\r\n  grade2: string;\r\n  grade1: string;\r\n  grade0: string;\r\n}\r\n\r\nfunction getPixelRatio() {\r\n  if (typeof window === \"undefined\") {\r\n    return 1;\r\n  }\r\n  return window.devicePixelRatio || 1;\r\n}\r\n\r\nconst DATE_FORMAT = \"yyyy-MM-dd\";\r\nconst boxWidth = 10;\r\nconst boxMargin = 2;\r\nconst textHeight = 15;\r\nconst defaultFontFace = \"IBM Plex Mono\";\r\nconst headerHeight = 60;\r\nconst canvasMargin = 20;\r\nconst yearHeight = textHeight + (boxWidth + boxMargin) * 8 + canvasMargin;\r\nconst scaleFactor = getPixelRatio();\r\n\r\nfunction getTheme(opts: Options): Theme {\r\n  const { themeName, customTheme } = opts;\r\n  if (customTheme) {\r\n    return {\r\n      background: customTheme.background ?? themes.standard.background,\r\n      text: customTheme.text ?? themes.standard.text,\r\n      meta: customTheme.meta ?? themes.standard.meta,\r\n      grade4: customTheme.grade4 ?? themes.standard.grade4,\r\n      grade3: customTheme.grade3 ?? themes.standard.grade3,\r\n      grade2: customTheme.grade2 ?? themes.standard.grade2,\r\n      grade1: customTheme.grade1 ?? themes.standard.grade1,\r\n      grade0: customTheme.grade0 ?? themes.standard.grade0\r\n    };\r\n  }\r\n  const name = themeName ?? \"standard\";\r\n  return themes[name] ?? themes.standard;\r\n}\r\n\r\nfunction getDateInfo(data: DataStruct, date: string) {\r\n  return data.contributions.find(contrib => contrib.date === date);\r\n}\r\n\r\nfunction drawYear(ctx: CanvasRenderingContext2D, opts: DrawYearOptions) {\r\n  const {\r\n    year,\r\n    offsetX = 0,\r\n    offsetY = 0,\r\n    data,\r\n    fontFace = defaultFontFace\r\n  } = opts;\r\n  const theme = getTheme(opts);\r\n\r\n  const today = new Date();\r\n  const thisYear = format(today, \"yyyy\");\r\n  const lastDate = year.year === thisYear ? today : parseISO(year.range.end);\r\n  const firstRealDate = parseISO(`${year.year}-01-01`);\r\n  const firstDate = startOfWeek(firstRealDate, { weekStartsOn: 1 });\r\n\r\n  let nextDate = firstDate;\r\n  const firstRowDates: GraphEntry[] = [];\r\n  const graphEntries: GraphEntry[][] = [];\r\n\r\n  while (isBefore(nextDate, lastDate)) {\r\n    const date = format(nextDate, DATE_FORMAT);\r\n    firstRowDates.push({\r\n      date,\r\n      info: getDateInfo(data, date)\r\n    });\r\n    nextDate = addWeeks(nextDate, 1);\r\n  }\r\n\r\n  graphEntries.push(firstRowDates);\r\n\r\n  for (let i = 1; i < 7; i += 1) {\r\n    graphEntries.push(\r\n      firstRowDates.map(dateObj => {\r\n        const date = format(addDays(parseISO(dateObj.date), i), DATE_FORMAT);\r\n        return {\r\n          date,\r\n          info: getDateInfo(data, date)\r\n        };\r\n      })\r\n    );\r\n  }\r\n  if (!opts.skipHeader) {\r\n    ctx.textBaseline = \"hanging\";\r\n    ctx.fillStyle = theme.text;\r\n    ctx.font = `10px '${fontFace}'`;\r\n    ctx.fillText(\r\n      `${year.year}: ${year.total} Contribution${year.total === 1 ? \"\" : \"s\"}${\r\n        thisYear === year.year ? \" (so far)\" : \"\"\r\n      }`,\r\n      offsetX,\r\n      offsetY - 17\r\n    );\r\n  }\r\n\r\n  for (let y = 0; y < graphEntries.length; y += 1) {\r\n    for (let x = 0; x < graphEntries[y].length; x += 1) {\r\n      const day = graphEntries[y][x];\r\n      const cellDate = parseISO(day.date);\r\n      if (isBefore(cellDate, firstRealDate) || isAfter(cellDate, lastDate) || !day.info) {\r\n        continue;\r\n      }\r\n      // @ts-ignore\r\n      const color = theme[`grade${day.info.intensity}`];\r\n      ctx.fillStyle = color;\r\n      ctx.fillRect(\r\n        offsetX + (boxWidth + boxMargin) * x,\r\n        offsetY + textHeight + (boxWidth + boxMargin) * y,\r\n        10,\r\n        10\r\n      );\r\n    }\r\n  }\r\n\r\n  // Draw Month Label\r\n  let lastCountedMonth = 0;\r\n  for (let y = 0; y < graphEntries[0].length; y += 1) {\r\n    const date = parseISO(graphEntries[0][y].date);\r\n    const month = getMonth(date) + 1;\r\n    const firstMonthIsDec = month === 12 && y === 0;\r\n    const monthChanged = month !== lastCountedMonth;\r\n    if (!opts.skipAxisLabel && monthChanged && !firstMonthIsDec) {\r\n      ctx.fillStyle = theme.meta;\r\n      ctx.fillText(\r\n        format(date, \"MMM\"),\r\n        offsetX + (boxWidth + boxMargin) * y,\r\n        offsetY\r\n      );\r\n      lastCountedMonth = month;\r\n    }\r\n  }\r\n}\r\n\r\nfunction drawMetaData(\r\n  ctx: CanvasRenderingContext2D,\r\n  opts: DrawMetadataOptions\r\n) {\r\n  const {\r\n    username,\r\n    width,\r\n    height,\r\n    footerText,\r\n    data,\r\n    fontFace = defaultFontFace\r\n  } = opts;\r\n  const theme = getTheme(opts);\r\n  ctx.fillStyle = theme.background;\r\n  ctx.fillRect(0, 0, width, height);\r\n\r\n  if (footerText) {\r\n    ctx.fillStyle = theme.meta;\r\n    ctx.textBaseline = \"bottom\";\r\n    ctx.font = `10px '${fontFace}'`;\r\n    ctx.fillText(footerText, canvasMargin, height - 5);\r\n  }\r\n\r\n  // chart legend\r\n  let themeGrades = 5;\r\n  ctx.fillStyle = theme.text;\r\n  ctx.fillText(\r\n    \"Less\",\r\n    width - canvasMargin - (boxWidth + boxMargin) * themeGrades - 55,\r\n    37\r\n  );\r\n  ctx.fillText(\"More\", width - canvasMargin - 25, 37);\r\n  for (let x = 0; x < 5; x += 1) {\r\n    // @ts-ignore\r\n    ctx.fillStyle = theme[`grade${x}`];\r\n    ctx.fillRect(\r\n      width - canvasMargin - (boxWidth + boxMargin) * themeGrades - 27,\r\n      textHeight + boxWidth,\r\n      10,\r\n      10\r\n    );\r\n    themeGrades -= 1;\r\n  }\r\n\r\n  ctx.fillStyle = theme.text;\r\n  ctx.textBaseline = \"hanging\";\r\n  ctx.font = `20px '${fontFace}'`;\r\n  ctx.fillText(`@${username} on Perforce`, canvasMargin, canvasMargin);\r\n\r\n  let totalContributions = 0;\r\n  for (const year of data.years) {\r\n    totalContributions += year.total;\r\n  }\r\n  ctx.font = `10px '${fontFace}'`;\r\n  ctx.fillText(\r\n    `Total Contributions: ${totalContributions}`,\r\n    canvasMargin,\r\n    canvasMargin + 30\r\n  );\r\n\r\n  ctx.beginPath();\r\n  ctx.moveTo(canvasMargin, 55 + 10);\r\n  ctx.lineTo(width - canvasMargin, 55 + 10);\r\n  ctx.strokeStyle = theme.grade0;\r\n  ctx.stroke();\r\n}\r\n\r\nexport function drawContributions(canvas: HTMLCanvasElement, opts: Options) {\r\n  const { data } = opts;\r\n  let headerOffset = 0;\r\n  if (!opts.skipHeader) {\r\n    headerOffset = headerHeight;\r\n  }\r\n  const height =\r\n    data.years.length * yearHeight + canvasMargin + headerOffset + 10;\r\n  const width = 53 * (boxWidth + boxMargin) + canvasMargin * 2;\r\n\r\n  canvas.width = width * scaleFactor;\r\n  canvas.height = height * scaleFactor;\r\n\r\n  const ctx = canvas.getContext(\"2d\");\r\n\r\n  if (!ctx) {\r\n    throw new Error(\"Could not get 2d context from Canvas\");\r\n  }\r\n\r\n  ctx.scale(scaleFactor, scaleFactor);\r\n  ctx.textBaseline = \"hanging\";\r\n  if (!opts.skipHeader) {\r\n    drawMetaData(ctx, {\r\n      ...opts,\r\n      width,\r\n      height,\r\n      data\r\n    });\r\n  }\r\n\r\n  data.years.forEach((year, i) => {\r\n    const offsetY = yearHeight * i + canvasMargin + headerOffset + 10;\r\n    const offsetX = canvasMargin;\r\n    drawYear(ctx, {\r\n      ...opts,\r\n      year,\r\n      offsetX,\r\n      offsetY,\r\n      data\r\n    });\r\n  });\r\n}\r\n\r\nexport { themes } from \"./themes\";\r\n"],"names":["themes","__test__","background","text","meta","grade4","grade3","grade2","grade1","grade0","standard","classic","githubDark","halloween","teal","leftPad","dracula","blue","panda","sunny","pink","YlGnBu","solarizedDark","solarizedLight","getPixelRatio","window","devicePixelRatio","DATE_FORMAT","boxWidth","boxMargin","textHeight","defaultFontFace","headerHeight","canvasMargin","yearHeight","scaleFactor","getTheme","opts","themeName","customTheme","name","getDateInfo","data","date","contributions","find","contrib","drawYear","ctx","year","offsetX","offsetY","fontFace","theme","today","Date","thisYear","format","lastDate","parseISO","range","end","firstRealDate","firstDate","startOfWeek","weekStartsOn","nextDate","firstRowDates","graphEntries","isBefore","push","info","addWeeks","i","map","dateObj","addDays","skipHeader","textBaseline","fillStyle","font","fillText","total","y","length","x","day","cellDate","isAfter","color","intensity","fillRect","lastCountedMonth","month","getMonth","firstMonthIsDec","monthChanged","skipAxisLabel","drawMetaData","username","width","height","footerText","themeGrades","totalContributions","years","beginPath","moveTo","lineTo","strokeStyle","stroke","drawContributions","canvas","headerOffset","getContext","Error","scale","forEach"],"mappings":"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"}